<%- include("partials/header")  %>

<h1>Grafica de PIE</h1>

<div align="center" id="piechart"></div>
<%- include("partials/footer")  %>

<script type="text/javascript">
    // Load google charts
deptos = [];
cantidad = [];
"<%resultado.forEach(function(res){%>"
    deptos.push("<%=res._id%>");
    cantidad.push("<%=res.count%>");
"<% }) %>"

    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChart);
    
    // Draw the chart and set the chart values
    function drawChart() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Departamento');
        data.addColumn('number', 'Cantidad');
        for(i = 0; i < deptos.length; i++){
            data.addRow([deptos[i], Number(cantidad[i])]);
         
        }      
      // Optional; add a title and set the width and height of the chart
      var options = {'title':'POR DEPARTAMENTOS', 'width':550, 'height':400};
    
      // Display the chart inside the <div> element with id="piechart"
      var chart = new google.visualization.PieChart(document.getElementById('piechart'));
      chart.draw(data, options);
    }
    </script>





<%- include("partials/script")  %>
